// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var frame, gallery, image_container, images, selectImage;
    gallery = $('.gallery');
    if (!gallery.length) {
      return;
    }
    frame = gallery.find('.frame');
    image_container = gallery.find('.images');
    images = image_container.children();
    if (images.length === 1) {
      image_container.hide();
    }
    selectImage = function(event, element) {
      var $img, $this, img;
      if (event) {
        event.preventDefault();
      }
      if (element) {
        $this = element;
      } else {
        $this = $(this);
      }
      images.removeClass('active');
      img = new Image();
      $img = $(img);
      img.onload = function() {
        frame.animate({
          height: img.height + 'px'
        }, 100);
        frame.children().addClass('old');
        return $img.hide().appendTo(frame).fadeIn(function() {
          frame.children('.old').remove();
          return $this.addClass('active');
        });
      };
      return img.src = $this.attr('href');
    };
    images.click(selectImage);
    return selectImage(null, images.first());
  });

}).call(this);
